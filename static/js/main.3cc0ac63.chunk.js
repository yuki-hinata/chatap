(this.webpackJsonpchatapp2=this.webpackJsonpchatapp2||[]).push([[0],{43:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(25),s=n.n(r),i=n(12),o=n(22);n(44),n(33);o.a.initializeApp({apiKey:"AIzaSyDEnXnZrt025nhWpiNQP1th8levX9rdQkQ",authDomain:"chat-app2-bb19a.firebaseapp.com",projectId:"chat-app2-bb19a",storageBucket:"chat-app2-bb19a.appspot.com",messagingSenderId:"671906755445",appId:"1:671906755445:web:e8ce9dfa607d5ee41dd93c"});var j=o.a,u=n(2),l=a.a.createContext(),b=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(i.a)(n,2),r=a[0],s=a[1];return console.log(r),Object(c.useEffect)((function(){j.auth().onAuthStateChanged((function(e){s(e)}))}),[]),Object(u.jsx)(l.Provider,{value:r,children:t})},d=n(5),p=function(e){var t=e.history,n=Object(c.useState)(""),r=Object(i.a)(n,2),s=r[0],o=r[1],b=Object(c.useState)(""),p=Object(i.a)(b,2),h=p[0],O=p[1];if(Object(c.useContext)(l))return Object(u.jsx)(d.a,{to:"/"});return Object(u.jsxs)(a.a.Fragment,{children:[Object(u.jsx)("h1",{children:"Login"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventdefault(),j.auth().signInWithEmailAndPassword(s,h).then((function(){t.push("/")})).catch((function(e){console.log(e)}))},children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"email",children:"E-Mail"}),Object(u.jsx)("input",{type:"email",id:"email",name:"email",placeholder:"Email",onChange:function(e){return o(e.target.value)}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"password",children:"Password"}),Object(u.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"password",onChange:function(e){return O(e.target.value)}})]}),Object(u.jsx)("button",{type:"submit",children:"Login"})]})]})},h=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(i.a)(r,2),o=s[0],l=s[1],b=Object(c.useState)(""),d=Object(i.a)(b,2),p=d[0],h=d[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"SignUp"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j.auth().createUserWithEmailAndPassword(n,o).then((function(e){e.user.updateProfile({displayName:p})})).catch((function(e){console.log(e)}))},children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"name",children:"Name"}),Object(u.jsx)("input",{type:"name",id:"name",name:"name",placeholder:"name",onChange:function(e){return h(e.target.value)}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"email",children:"E-Mail"}),Object(u.jsx)("input",{type:"email",id:"email",name:"email",placeholder:"Email",onChange:function(e){return a(e.target.value)}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"password",children:"Password"}),Object(u.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"password",onChange:function(e){return l(e.target.value)}})]}),Object(u.jsx)("button",{type:"submit",children:"Sign Up"})]})]})},O=function(e){var t=e.content,n=e.user;return Object(u.jsxs)("li",{children:[n,":",t]})},m=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),o=Object(i.a)(s,2),b=o[0],d=o[1];Object(c.useEffect)((function(){j.firestore().collection("messages").orderBy("time","asc").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data()}));r(t)}))}),[]);var p=Object(c.useContext)(l);return Object(u.jsxs)(a.a.Fragment,{children:[Object(u.jsx)("h1",{children:"Room"}),Object(u.jsx)("ul",{children:n.map((function(e,t){return Object(u.jsx)(O,{content:e.content,user:e.user},t)}))}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d(""),j.firestore().collection("messages").add({time:j.firestore.FieldValue.serverTimestamp(),content:b,user:p.displayName})},children:[Object(u.jsx)("input",{type:"text",value:b,onChange:function(e){return d(e.target.value)}}),Object(u.jsx)("button",{type:"submit",children:"\u9001\u4fe1"})]}),Object(u.jsx)("button",{onClick:function(){return j.auth().signOut()},children:"Logout"})]})},x=n(19),f=n(27),g=["component"],v=function(e){var t=e.component,n=Object(f.a)(e,g),a=Object(c.useContext)(l);return Object(u.jsx)(d.b,Object(x.a)(Object(x.a)({},n),{},{render:function(e){return a?Object(u.jsx)(t,Object(x.a)({},e)):Object(u.jsx)(d.a,{to:"/login"})}}))},w=n(18),S=function(){return Object(u.jsx)(b,{children:Object(u.jsx)(w.a,{basename:"/chatapp2",children:Object(u.jsxs)(d.d,{children:[Object(u.jsx)(v,{exact:!0,path:"/",component:m}),Object(u.jsx)(d.b,{exact:!0,path:"/login",component:p}),Object(u.jsx)(d.b,{exact:!0,path:"/signup",component:h})]})})})};s.a.render(Object(u.jsx)(S,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.3cc0ac63.chunk.js.map